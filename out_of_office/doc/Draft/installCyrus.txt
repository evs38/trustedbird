Serveur recette milimail
------------------------

Liens:
http://www.ibiblio.org/pub/linux/docs/howto/translations/fr/html-1page/Cyrus-IMAP.html
http://www.luxpopuli.fr/internet/postfix_cyrus_imap_ssl_ldap/cyrus_imap_installer_cyrus_imap


Procédure d'installation:

/etc/apt/sources.list:
main contrib non-free

aptitude update
aptitude dist-upgrade

VMware tools:
aptitude install psmisc build-essential linux-headers-2.6-686
=> VMware tools

aptitude install postfix qpsmtpd ssh

== Postfix ==
access unix socket /var/run/cyrus/socket/lmtp:
adduser postfix mail

main.cf:
mailbox_transport = lmtp:unix:/var/run/cyrus/socket/lmtp
local_recipient_maps =

master.cf:
lmtp NOT in chroot

== Cyrus ==
Base de passwords utilisateurs: /dev/sasldb2
saslpasswd2 -c cyrus
saslpasswd2 -c user1
sasldblistusers2
chown cyrus /etc/sasldb2

cyradm --user cyrus localhost
cyradm> cm user.user1

Suppression mailbox:
cyradm> sam user.user1 cyrus all
cyradm> dm user.user1

Test login IMAP:
imtest -a user1 localhost

== Sieve ==
Configuration dans le fichier /etc/cyrus.conf
Activer l'accés distant au serveur SIEVE (autre que localhost)
changer la ligne : 
	sieve  cmd="timsieved" listen"sieve" prefork=0 maxchild=100
à la place de 
	sieve  cmd="timsieved" listen"localhost:sieve" prefork=0 maxchild=100


