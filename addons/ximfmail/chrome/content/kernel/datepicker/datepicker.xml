<?xml version="1.0"?>
<!DOCTYPE bindings 
[
    <!ENTITY % dtd1 SYSTEM "chrome://ximfmail/locale/datepicker.dtd" > %dtd1;    
  
]>
<bindings 
	xmlns="http://www.mozilla.org/xbl"
	xmlns:html="http://www.w3.org/1999/xhtml"
	xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
	xmlns:xbl="http://www.mozilla.org/xbl">

	<binding id="datepicker" extends="xul:box">
		<resources>
			<stylesheet src="chrome://ximfmail/content/datepicker/datepicker.css"/>
			<script src="util.js"/>
		</resources>

		<content>
			<xul:hbox class="textbox-input-box" flex="1" style="padding-right: 3px;" xbl:inherits="context">
				<xul:hbox align="center" pack="center" flex="1">
					<xul:textbox maxlength="17" anonid="input" flex="1"						
						xbl:inherits="class=txtclass,id,context,width,disabled,onfocus,onblur,value,type,maxlength,size,readonly,tabindex,accesskey"/>						
				</xul:hbox>
				<xul:hbox pack="center" align="center" flex="0">
					<xul:button id="datepicker-button" oncommand="openPopup(this)" position="after_start" />
				</xul:hbox>

				<xul:popup onpopupshowing="popupshowing(this)"	 
									 anonid="oe-date-picker-popup" 
									 position="start_before" 
									 oncommand="format(this, 'oe-date-picker-text-box')" value="">
					<xul:vbox id="oe-date-picker-overlay-box" >			
						<xul:hbox id="oe-date-picker-year-controls-box"  >
							<xul:box flex="1">
							<xul:image id="oe-date-picker-year-previous-jump-button" onclick="previousYearCommand(10)"/>   
							<xul:image id="oe-date-picker-year-previous-button" onclick="previousYearCommand(1)"/>							
							</xul:box>
							<xul:label id="oe-date-picker-year-title-text" anonid="oe-date-picker-year-title-text" value="" />		
							<xul:box flex="1" id="oe-date-picker-year-next-button-box" >
							<xul:image id="oe-date-picker-year-next-button" onclick="nextYearCommand(1)"/>
							<xul:image id="oe-date-picker-year-next-jump-button" onclick="nextYearCommand(10)"/>
							</xul:box>  
						</xul:hbox> 
						
							<xul:grid id="oe-date-picker-year-grid" flex="1">
									<xul:columns>
											<xul:column class="oe-date-picker-year-column-class" flex="1"/>
											<xul:column class="oe-date-picker-year-column-class" flex="1"/>
											<xul:column class="oe-date-picker-year-column-class" flex="1"/>
											<xul:column class="oe-date-picker-year-column-class" flex="1"/>
									</xul:columns>
									<xul:rows >
											<xul:row flex="1"  >
													<xul:vbox class="oe-date-picker-year-month-box-class"  
																		anonid="oe-date-picker-year-month-1-box"  
																		onclick="clickMonth(this, 1)" >
															<xul:spacer flex="1" />
															<xul:box ><xul:label  class="oe-date-picker-year-month-name-class"  value="&month.1.MMM;" /></xul:box> 
															<xul:spacer flex="1" />
													</xul:vbox>  
													<xul:vbox class="oe-date-picker-year-month-box-class" anonid="oe-date-picker-year-month-2-box"  onclick="clickMonth(this, 2)" >
															<xul:spacer flex="1" />
															<xul:box><xul:label  class="oe-date-picker-year-month-name-class"  value="&month.2.MMM;" /></xul:box> 
															<xul:spacer flex="1" />
													</xul:vbox>  
													<xul:vbox class="oe-date-picker-year-month-box-class" anonid="oe-date-picker-year-month-3-box"  onclick="clickMonth(this, 3)" >
															<xul:spacer flex="1" />
															<xul:box><xul:label  class="oe-date-picker-year-month-name-class"  value="&month.3.MMM;" /></xul:box> 
															<xul:spacer flex="1" />
													</xul:vbox>  
													<xul:vbox class="oe-date-picker-year-month-box-class" anonid="oe-date-picker-year-month-4-box"  onclick="clickMonth(this, 4)" >
															<xul:spacer flex="1" />
															<xul:box><xul:label  class="oe-date-picker-year-month-name-class"  value="&month.4.MMM;" /></xul:box> 
															<xul:spacer flex="1" />
													</xul:vbox>  
											</xul:row>  
											<xul:row flex="1"  >
													<xul:vbox class="oe-date-picker-year-month-box-class" anonid="oe-date-picker-year-month-5-box"  onclick="clickMonth(this, 5)" >
															<xul:spacer flex="1" />
															<xul:box><xul:label  class="oe-date-picker-year-month-name-class"  value="&month.5.MMM;" /></xul:box> 
															<xul:spacer flex="1" />
													</xul:vbox>  
													<xul:vbox class="oe-date-picker-year-month-box-class"  anonid="oe-date-picker-year-month-6-box" onclick="clickMonth(this, 6)" >
															<xul:spacer flex="1" />
															<xul:box><xul:label  class="oe-date-picker-year-month-name-class"  value="&month.6.MMM;" /></xul:box> 
															<xul:spacer flex="1" />
													</xul:vbox>  
													<xul:vbox class="oe-date-picker-year-month-box-class"  anonid="oe-date-picker-year-month-7-box" onclick="clickMonth(this, 7)" >
															<xul:spacer flex="1" />
															<xul:box><xul:label  class="oe-date-picker-year-month-name-class"  value="&month.7.MMM;" /></xul:box> 
															<xul:spacer flex="1" />
													</xul:vbox>  
													<xul:vbox class="oe-date-picker-year-month-box-class"  anonid="oe-date-picker-year-month-8-box" onclick="clickMonth(this, 8)" >
															<xul:spacer flex="1" />
															<xul:box><xul:label  class="oe-date-picker-year-month-name-class"  value="&month.8.MMM;" /></xul:box> 
															<xul:spacer flex="1" />
													</xul:vbox>  
											</xul:row>  
											<xul:row flex="1"  >
													<xul:vbox class="oe-date-picker-year-month-box-class" anonid="oe-date-picker-year-month-9-box"  onclick="clickMonth(this, 9)" >
															<xul:spacer flex="1" />
															<xul:box><xul:label  class="oe-date-picker-year-month-name-class"  value="&month.9.MMM;" /></xul:box> 
															<xul:spacer flex="1" />
													</xul:vbox>  
													<xul:vbox class="oe-date-picker-year-month-box-class"  anonid="oe-date-picker-year-month-10-box" onclick="clickMonth(this, 10)" >
															<xul:spacer flex="1" />
															<xul:box><xul:label  class="oe-date-picker-year-month-name-class"  value="&month.10.MMM;" /></xul:box> 
															<xul:spacer flex="1" />
													</xul:vbox>  
													<xul:vbox class="oe-date-picker-year-month-box-class" anonid="oe-date-picker-year-month-11-box"  onclick="clickMonth(this, 11)" >
															<xul:spacer flex="1" />
															<xul:box><xul:label  class="oe-date-picker-year-month-name-class"  value="&month.11.MMM;" /></xul:box> 
															<xul:spacer flex="1" />
													</xul:vbox>  
													<xul:vbox class="oe-date-picker-year-month-box-class" 
																		anonid="oe-date-picker-year-month-12-box"  
																		onclick="clickMonth(this, 12)" >
															<xul:spacer flex="1" />
															<xul:box><xul:label  class="oe-date-picker-year-month-name-class"  value="&month.12.MMM;" /></xul:box> 
															<xul:spacer flex="1" />
													</xul:vbox>  
											</xul:row>  
									
									
									</xul:rows>
							
							</xul:grid>
							
							<xul:box id="oe-date-picker-month-grid-box" flex="1">
									
									<xul:grid id="oe-date-picker-month-grid" flex="1">
											<xul:columns>
													<xul:column flex="1"/>
													<xul:column flex="1"/>
													<xul:column flex="1"/>
													<xul:column flex="1"/>
													<xul:column flex="1"/>
													<xul:column flex="1"/>
													<xul:column flex="1"/>
													<xul:column flex="1"/>
											</xul:columns>
											<xul:rows>
										 
													<xul:row id="oe-date-picker-month-days-header-box">
															<xul:vbox class="oe-date-picker-month-days-header-class-red" anonid="oe-date-picker-month-day-1-header-box">
																	<xul:label class="oe-date-picker-month-days-header-class" value="&day.1.DDD;" />
															</xul:vbox>    
															<xul:vbox class="oe-date-picker-month-days-box-header-class" anonid="oe-date-picker-month-day-2-header-box">
																	<xul:label class="oe-date-picker-month-days-header-class" value="&day.2.DDD;" />
															</xul:vbox>    
															<xul:vbox class="oe-date-picker-month-days-box-header-class" anonid="oe-date-picker-month-day-3-header-box">
																	<xul:label class="oe-date-picker-month-days-header-class" value="&day.3.DDD;" />
															</xul:vbox>    
															<xul:vbox class="oe-date-picker-month-days-box-header-class" anonid="oe-date-picker-month-day-4-header-box">
																	<xul:label class="oe-date-picker-month-days-header-class" value="&day.4.DDD;" />
															</xul:vbox>    
															<xul:vbox class="oe-date-picker-month-days-box-header-class" anonid="oe-date-picker-month-day-5-header-box">
																	<xul:label class="oe-date-picker-month-days-header-class" value="&day.5.DDD;" />
															</xul:vbox>    
															<xul:vbox class="oe-date-picker-month-days-box-header-class" anonid="oe-date-picker-month-day-6-header-box">
																	<xul:label class="oe-date-picker-month-days-header-class" value="&day.6.DDD;" />
															</xul:vbox>    
															<xul:vbox class="oe-date-picker-month-days-box-header-class" anonid="oe-date-picker-month-day-7-header-box">
																	<xul:label class="oe-date-picker-month-days-header-class" value="&day.7.DDD;" />
															</xul:vbox>    
													</xul:row>
													
													<xul:row>
															<xul:vbox class="oe-date-picker-month-day-box-class" anonid="oe-date-picker-month-day-1-box" onclick="clickDay(this,1)">
																	<xul:label  class="oe-date-picker-month-day-number-class" anonid="oe-date-picker-month-day-text-1" value="" />
															</xul:vbox>    
															<xul:vbox class="oe-date-picker-month-day-box-class" anonid="oe-date-picker-month-day-2-box" onclick="clickDay(this,2)">
																	<xul:label  class="oe-date-picker-month-day-number-class" anonid="oe-date-picker-month-day-text-2" value="" />
															</xul:vbox>    
															<xul:vbox class="oe-date-picker-month-day-box-class" anonid="oe-date-picker-month-day-3-box" onclick="clickDay(this,3)">
																	<xul:label  class="oe-date-picker-month-day-number-class" anonid="oe-date-picker-month-day-text-3" value="" />
															</xul:vbox>    
															<xul:vbox class="oe-date-picker-month-day-box-class" anonid="oe-date-picker-month-day-4-box" onclick="clickDay(this,4)">
																	<xul:label  class="oe-date-picker-month-day-number-class" anonid="oe-date-picker-month-day-text-4" value="" />
															</xul:vbox>    
															<xul:vbox class="oe-date-picker-month-day-box-class"  anonid="oe-date-picker-month-day-5-box" onclick="clickDay(this,5)">
																	<xul:label  class="oe-date-picker-month-day-number-class" anonid="oe-date-picker-month-day-text-5" value="" />
															</xul:vbox>    
															<xul:vbox class="oe-date-picker-month-day-box-class"  anonid="oe-date-picker-month-day-6-box" onclick="clickDay(this,6)">
																	<xul:label  class="oe-date-picker-month-day-number-class" anonid="oe-date-picker-month-day-text-6" value="" />
															</xul:vbox>    
															<xul:vbox class="oe-date-picker-month-day-box-class"  anonid="oe-date-picker-month-day-7-box" onclick="clickDay(this,7)">
																	<xul:label  class="oe-date-picker-month-day-number-class" anonid="oe-date-picker-month-day-text-7" value="" />
															</xul:vbox>    
													</xul:row>
													
													<xul:row>
															<xul:vbox class="oe-date-picker-month-day-box-class"  anonid="oe-date-picker-month-day-8-box" onclick="clickDay(this,8)">
																	<xul:label  class="oe-date-picker-month-day-number-class" anonid="oe-date-picker-month-day-text-8" value="" />
															</xul:vbox>    
															<xul:vbox class="oe-date-picker-month-day-box-class"  anonid="oe-date-picker-month-day-9-box" onclick="clickDay(this,9)">
																	<xul:label  class="oe-date-picker-month-day-number-class" anonid="oe-date-picker-month-day-text-9" value="" />
															</xul:vbox>    
															<xul:vbox class="oe-date-picker-month-day-box-class"  anonid="oe-date-picker-month-day-10-box" onclick="clickDay(this,10)">
																	<xul:label  class="oe-date-picker-month-day-number-class" anonid="oe-date-picker-month-day-text-10" value="" />
															</xul:vbox>    
															<xul:vbox class="oe-date-picker-month-day-box-class"  anonid="oe-date-picker-month-day-11-box" onclick="clickDay(this,11)">
																	<xul:label  class="oe-date-picker-month-day-number-class" anonid="oe-date-picker-month-day-text-11" value="" />
															</xul:vbox>    
															<xul:vbox class="oe-date-picker-month-day-box-class"  anonid="oe-date-picker-month-day-12-box" onclick="clickDay(this,12)">
																	<xul:label  class="oe-date-picker-month-day-number-class" anonid="oe-date-picker-month-day-text-12" value="" />
															</xul:vbox>    
															<xul:vbox class="oe-date-picker-month-day-box-class" anonid="oe-date-picker-month-day-13-box"  onclick="clickDay(this,13)">
																	<xul:label  class="oe-date-picker-month-day-number-class" anonid="oe-date-picker-month-day-text-13" value="" />
															</xul:vbox>    
															<xul:vbox class="oe-date-picker-month-day-box-class" anonid="oe-date-picker-month-day-14-box" onclick="clickDay(this,14)">
																	<xul:label  class="oe-date-picker-month-day-number-class" anonid="oe-date-picker-month-day-text-14" value="" />
															</xul:vbox>    
													</xul:row>
													
													<xul:row>
															<xul:vbox class="oe-date-picker-month-day-box-class" anonid="oe-date-picker-month-day-15-box" onclick="clickDay(this,15)">
																	<xul:label  class="oe-date-picker-month-day-number-class" anonid="oe-date-picker-month-day-text-15" value="" />
															</xul:vbox>    
															<xul:vbox class="oe-date-picker-month-day-box-class" anonid="oe-date-picker-month-day-16-box" onclick="clickDay(this,16)">
																	<xul:label  class="oe-date-picker-month-day-number-class" anonid="oe-date-picker-month-day-text-16" value="" />
															</xul:vbox>    
															<xul:vbox class="oe-date-picker-month-day-box-class"  anonid="oe-date-picker-month-day-17-box" onclick="clickDay(this,17)">
																	<xul:label  class="oe-date-picker-month-day-number-class" anonid="oe-date-picker-month-day-text-17" value="" />
															</xul:vbox>    
															<xul:vbox class="oe-date-picker-month-day-box-class"  anonid="oe-date-picker-month-day-18-box" onclick="clickDay(this,18)">
																	<xul:label  class="oe-date-picker-month-day-number-class" anonid="oe-date-picker-month-day-text-18" value="" />
															</xul:vbox>    
															<xul:vbox class="oe-date-picker-month-day-box-class"  anonid="oe-date-picker-month-day-19-box" onclick="clickDay(this,19)">
																	<xul:label  class="oe-date-picker-month-day-number-class" anonid="oe-date-picker-month-day-text-19" value="" />
															</xul:vbox>    
															<xul:vbox class="oe-date-picker-month-day-box-class"  anonid="oe-date-picker-month-day-20-box" onclick="clickDay(this,20)">
																	<xul:label  class="oe-date-picker-month-day-number-class" anonid="oe-date-picker-month-day-text-20" value="" />
															</xul:vbox>    
															<xul:vbox class="oe-date-picker-month-day-box-class"  anonid="oe-date-picker-month-day-21-box" onclick="clickDay(this,21)">
																	<xul:label  class="oe-date-picker-month-day-number-class" anonid="oe-date-picker-month-day-text-21" value="" />
															</xul:vbox>    
													</xul:row>
													
													<xul:row>
															<xul:vbox class="oe-date-picker-month-day-box-class"  anonid="oe-date-picker-month-day-22-box" onclick="clickDay(this,22)">
																	<xul:label  class="oe-date-picker-month-day-number-class" anonid="oe-date-picker-month-day-text-22" value="" />
															</xul:vbox>    
															<xul:vbox class="oe-date-picker-month-day-box-class"  anonid="oe-date-picker-month-day-23-box" onclick="clickDay(this,23)">
																	<xul:label  class="oe-date-picker-month-day-number-class" anonid="oe-date-picker-month-day-text-23" value="" />
															</xul:vbox>    
															<xul:vbox class="oe-date-picker-month-day-box-class"  anonid="oe-date-picker-month-day-24-box" onclick="clickDay(this,24)">
																	<xul:label  class="oe-date-picker-month-day-number-class" anonid="oe-date-picker-month-day-text-24" value="" />
															</xul:vbox>    
															<xul:vbox class="oe-date-picker-month-day-box-class"   anonid="oe-date-picker-month-day-25-box" onclick="clickDay(this,25)">
																	<xul:label  class="oe-date-picker-month-day-number-class" anonid="oe-date-picker-month-day-text-25" value="" />
															</xul:vbox>    
															<xul:vbox class="oe-date-picker-month-day-box-class"  anonid="oe-date-picker-month-day-26-box" onclick="clickDay(this,26)">
																	<xul:label  class="oe-date-picker-month-day-number-class" anonid="oe-date-picker-month-day-text-26" value="" />
															</xul:vbox>    
															<xul:vbox class="oe-date-picker-month-day-box-class"  anonid="oe-date-picker-month-day-27-box" onclick="clickDay(this,27)">
																	<xul:label  class="oe-date-picker-month-day-number-class" anonid="oe-date-picker-month-day-text-27" value="" />
															</xul:vbox>    
															<xul:vbox class="oe-date-picker-month-day-box-class"  anonid="oe-date-picker-month-day-28-box" onclick="clickDay(this,28)">
																	<xul:label  class="oe-date-picker-month-day-number-class" anonid="oe-date-picker-month-day-text-28" value="" />
															</xul:vbox>    
													</xul:row>
													
													<xul:row>
															<xul:vbox class="oe-date-picker-month-day-box-class" anonid="oe-date-picker-month-day-29-box" onclick="clickDay(this,29)">
																	<xul:label  class="oe-date-picker-month-day-number-class" anonid="oe-date-picker-month-day-text-29" value="" />
															</xul:vbox>    
															<xul:vbox class="oe-date-picker-month-day-box-class" anonid="oe-date-picker-month-day-30-box" onclick="clickDay(this,30)">
																	<xul:label  class="oe-date-picker-month-day-number-class" anonid="oe-date-picker-month-day-text-30" value="" />
															</xul:vbox>    
															<xul:vbox class="oe-date-picker-month-day-box-class"  anonid="oe-date-picker-month-day-31-box" onclick="clickDay(this,31)">
																	<xul:label  class="oe-date-picker-month-day-number-class" anonid="oe-date-picker-month-day-text-31" value="" />
															</xul:vbox>    
															<xul:vbox class="oe-date-picker-month-day-box-class"  anonid="oe-date-picker-month-day-32-box" onclick="clickDay(this,32)">
																	<xul:label  class="oe-date-picker-month-day-number-class" anonid="oe-date-picker-month-day-text-32" value="" />
															</xul:vbox>    
															<xul:vbox class="oe-date-picker-month-day-box-class"  anonid="oe-date-picker-month-day-33-box" onclick="clickDay(this,33)">
																	<xul:label  class="oe-date-picker-month-day-number-class" anonid="oe-date-picker-month-day-text-33" value="" />
															</xul:vbox>    
															<xul:vbox class="oe-date-picker-month-day-box-class"  anonid="oe-date-picker-month-day-34-box" onclick="clickDay(this,34)">
																	<xul:label  class="oe-date-picker-month-day-number-class" anonid="oe-date-picker-month-day-text-34" value="" />
															</xul:vbox>    
															<xul:vbox class="oe-date-picker-month-day-box-class"  anonid="oe-date-picker-month-day-35-box" onclick="clickDay(this,35)">
																	<xul:label  class="oe-date-picker-month-day-number-class" anonid="oe-date-picker-month-day-text-35" value="" />
															</xul:vbox>    
													</xul:row>
													 
													<xul:row>
															<xul:vbox class="oe-date-picker-month-day-box-class"  anonid="oe-date-picker-month-day-36-box" onclick="clickDay(this,36)">
																	<xul:label  class="oe-date-picker-month-day-number-class" anonid="oe-date-picker-month-day-text-36" value="" />
															</xul:vbox>    
															<xul:vbox class="oe-date-picker-month-day-box-class"  anonid="oe-date-picker-month-day-37-box" onclick="clickDay(this,37)">
																	<xul:label  class="oe-date-picker-month-day-number-class" anonid="oe-date-picker-month-day-text-37" value="" />
															</xul:vbox>    
															<xul:vbox class="oe-date-picker-month-day-box-class"  anonid="oe-date-picker-month-day-38-box" onclick="clickDay(this,38)">
																	<xul:label  class="oe-date-picker-month-day-number-class" anonid="oe-date-picker-month-day-text-38" value="" />
															</xul:vbox>    
															<xul:vbox class="oe-date-picker-month-day-box-class"  anonid="oe-date-picker-month-day-39-box" onclick="clickDay(this,39)">
																	<xul:label  class="oe-date-picker-month-day-number-class" anonid="oe-date-picker-month-day-text-39" value="" />
															</xul:vbox>    
															<xul:vbox class="oe-date-picker-month-day-box-class"   anonid="oe-date-picker-month-day-40-box" onclick="clickDay(this,40)">
																	<xul:label  class="oe-date-picker-month-day-number-class" anonid="oe-date-picker-month-day-text-40" value="" />
															</xul:vbox>    
															<xul:vbox class="oe-date-picker-month-day-box-class"   anonid="oe-date-picker-month-day-41-box" onclick="clickDay(this,41)">
																	<xul:label  class="oe-date-picker-month-day-number-class" anonid="oe-date-picker-month-day-text-41" value="" />
															</xul:vbox>    
															<xul:vbox class="oe-date-picker-month-day-box-class"  anonid="oe-date-picker-month-day-42-box" onclick="clickDay(this,42)">
																	<xul:label  class="oe-date-picker-month-day-number-class" anonid="oe-date-picker-month-day-text-42" value="" />
															</xul:vbox>    
													</xul:row>
													
											</xul:rows>
									</xul:grid>
							</xul:box>
							
						<!-- EADS MODIFICATIONS -->
							<!-- 
							<xul:hbox>
								<xul:label value="TIME : " />
								<xul:radiogroup orient="horizontal">
	  								<xul:radio id="time12" label="12"  onclick="clickHourRange(12)"/>
	  								<xul:radio id="time24" label="24"  onclick="clickHourRange(24)" selected="true"/>
	  							</xul:radiogroup>						
							</xul:hbox>
							 -->
							<xul:separator />
							<xul:hbox><xul:label value="Heure"/></xul:hbox>
							<xul:grid flex="1" id="ximfmail-date-picker-hour-grid">
								<xul:columns>
									<xul:column class="oe-date-picker-year-column-class" flex="1"/>
									<xul:column class="oe-date-picker-year-column-class" flex="1"/>
									<xul:column class="oe-date-picker-year-column-class" flex="1"/>
									<xul:column class="oe-date-picker-year-column-class" flex="1"/>
									<xul:column class="oe-date-picker-year-column-class" flex="1"/>
									<xul:column class="oe-date-picker-year-column-class" flex="1"/>
									<xul:column class="oe-date-picker-year-column-class" flex="1"/>
									<xul:column class="oe-date-picker-year-column-class" flex="1"/>
								</xul:columns>
								
								<xul:rows>
									<!-- 
									<xul:row  flex="1">
										<xul:vbox class="oe-date-picker-year-month-box-class">
											<xul:label value="Hour"/>
										</xul:vbox>										
									</xul:row>
									 -->																	
									<xul:row  flex="1" anonid="ximfmail-date-picker-hour-12-header-box">
									
										<xul:vbox class="oe-date-picker-year-month-box-class" anonid="ximfmail-date-picker-hour-box-0" onclick="clickHour(this,0)">
											<xul:label  class="oe-date-picker-month-day-number-class" anonid="ximfmail-date-picker-hour-text-0" value="00" />
										</xul:vbox> 
										<xul:vbox class="oe-date-picker-year-month-box-class" anonid="ximfmail-date-picker-hour-box-1" onclick="clickHour(this,1)">
											<xul:label  class="oe-date-picker-month-day-number-class" anonid="ximfmail-date-picker-hour-text-1" value="01" />
										</xul:vbox>
										<xul:vbox class="oe-date-picker-year-month-box-class" anonid="ximfmail-date-picker-hour-box-2" onclick="clickHour(this,2)">
											<xul:label  class="oe-date-picker-month-day-number-class"  anonid="ximfmail-date-picker-hour-text-2" value="02" />
										</xul:vbox>
										<xul:vbox class="oe-date-picker-year-month-box-class" anonid="ximfmail-date-picker-hour-box-3" onclick="clickHour(this,3)">
											<xul:label  class="oe-date-picker-month-day-number-class" anonid="ximfmail-date-picker-hour-text-3" value="03" />
										</xul:vbox>
										<xul:vbox class="oe-date-picker-year-month-box-class" anonid="ximfmail-date-picker-hour-box-4" onclick="clickHour(this,4)">
											<xul:label  class="oe-date-picker-month-day-number-class" anonid="ximfmail-date-picker-hour-text-4" value="04" />
										</xul:vbox>
										<xul:vbox class="oe-date-picker-year-month-box-class" anonid="ximfmail-date-picker-hour-box-5" onclick="clickHour(this,5)">
											<xul:label  class="oe-date-picker-month-day-number-class" anonid="ximfmail-date-picker-hour-text-5" value="05" />
										</xul:vbox>
										<xul:vbox class="oe-date-picker-year-month-box-class" anonid="ximfmail-date-picker-hour-box-6" onclick="clickHour(this,6)">
											<xul:label  class="oe-date-picker-month-day-number-class" anonid="ximfmail-date-picker-hour-text-6" value="06" />
										</xul:vbox>
										<xul:vbox class="oe-date-picker-year-month-box-class" anonid="ximfmail-date-picker-hour-box-7" onclick="clickHour(this,7)">
											<xul:label  class="oe-date-picker-month-day-number-class" anonid="ximfmail-date-picker-hour-text-7" value="07" />
										</xul:vbox>
										<xul:vbox class="oe-date-picker-year-month-box-class" anonid="ximfmail-date-picker-hour-box-8" onclick="clickHour(this,8)">
											<xul:label  class="oe-date-picker-month-day-number-class" anonid="ximfmail-date-picker-hour-text-8" value="08" />
										</xul:vbox>
										<xul:vbox class="oe-date-picker-year-month-box-class" anonid="ximfmail-date-picker-hour-box-9" onclick="clickHour(this,9)">
											<xul:label  class="oe-date-picker-month-day-number-class" anonid="ximfmail-date-picker-hour-text-9" value="09" />
										</xul:vbox>
										<xul:vbox class="oe-date-picker-year-month-box-class" anonid="ximfmail-date-picker-hour-box-10" onclick="clickHour(this,10)">
											<xul:label  class="oe-date-picker-month-day-number-class" anonid="ximfmail-date-picker-hour-text-10" value="10" />
										</xul:vbox>
										<xul:vbox class="oe-date-picker-year-month-box-class" anonid="ximfmail-date-picker-hour-box-11" onclick="clickHour(this,11)">
											<xul:label  class="oe-date-picker-month-day-number-class" anonid="ximfmail-date-picker-hour-text-11" value="11" />
										</xul:vbox>										
									</xul:row>
									<xul:row flex="1" anonid="ximfmail-date-picker-hour-24-header-box">										
										<xul:vbox class="oe-date-picker-year-month-box-class" anonid="ximfmail-date-picker-hour-box-12" onclick="clickHour(this,12)">
											<xul:label  class="oe-date-picker-month-day-number-class" anonid="ximfmail-date-picker-hour-text-12" value="12" />
										</xul:vbox> 
										<xul:vbox class="oe-date-picker-year-month-box-class" anonid="ximfmail-date-picker-hour-box-13" onclick="clickHour(this,13)">
											<xul:label  class="oe-date-picker-month-day-number-class" anonid="ximfmail-date-picker-hour-text-13" value="13" />
										</xul:vbox>
										<xul:vbox class="oe-date-picker-year-month-box-class" anonid="ximfmail-date-picker-hour-box-14" onclick="clickHour(this,14)">
											<xul:label  class="oe-date-picker-month-day-number-class" anonid="ximfmail-date-picker-hour-text-14" value="14" />
										</xul:vbox>
										<xul:vbox class="oe-date-picker-year-month-box-class" anonid="ximfmail-date-picker-hour-box-15" onclick="clickHour(this,15)">
											<xul:label  class="oe-date-picker-month-day-number-class" anonid="ximfmail-date-picker-hour-text-15" value="15" />
										</xul:vbox>
										<xul:vbox class="oe-date-picker-year-month-box-class" anonid="ximfmail-date-picker-hour-box-16" onclick="clickHour(this,16)">
											<xul:label  class="oe-date-picker-month-day-number-class" anonid="ximfmail-date-picker-hour-text-16" value="16" />
										</xul:vbox>
										<xul:vbox class="oe-date-picker-year-month-box-class" anonid="ximfmail-date-picker-hour-box-17" onclick="clickHour(this,17)">
											<xul:label  class="oe-date-picker-month-day-number-class" anonid="ximfmail-date-picker-hour-text-17" value="17" />
										</xul:vbox>
										<xul:vbox class="oe-date-picker-year-month-box-class" anonid="ximfmail-date-picker-hour-box-18" onclick="clickHour(this,18)">
											<xul:label  class="oe-date-picker-month-day-number-class" anonid="ximfmail-date-picker-hour-text-18" value="18" />
										</xul:vbox>
										<xul:vbox class="oe-date-picker-year-month-box-class" anonid="ximfmail-date-picker-hour-box-19" onclick="clickHour(this,19)">
											<xul:label  class="oe-date-picker-month-day-number-class" anonid="ximfmail-date-picker-hour-text-19" value="19" />
										</xul:vbox>
										<xul:vbox class="oe-date-picker-year-month-box-class" anonid="ximfmail-date-picker-hour-box-20" onclick="clickHour(this,20)">
											<xul:label  class="oe-date-picker-month-day-number-class" anonid="ximfmail-date-picker-hour-text-20" value="20" />
										</xul:vbox>
										<xul:vbox class="oe-date-picker-year-month-box-class" anonid="ximfmail-date-picker-hour-box-21" onclick="clickHour(this,21)">
											<xul:label  class="oe-date-picker-month-day-number-class" anonid="ximfmail-date-picker-hour-text-21" value="21" />
										</xul:vbox>
										<xul:vbox class="oe-date-picker-year-month-box-class" anonid="ximfmail-date-picker-hour-box-22" onclick="clickHour(this,22)">
											<xul:label  class="oe-date-picker-month-day-number-class" anonid="ximfmail-date-picker-hour-text-22" value="22" />
										</xul:vbox>
										<xul:vbox class="oe-date-picker-year-month-box-class" anonid="ximfmail-date-picker-hour-box-23" onclick="clickHour(this,23)">
											<xul:label  class="oe-date-picker-month-day-number-class" anonid="ximfmail-date-picker-hour-text-23" value="23" />
										</xul:vbox>										
									</xul:row>
								</xul:rows>
							</xul:grid>							
							<xul:hbox><xul:label value="Minutes"/></xul:hbox>
							<xul:grid flex="1">
								<xul:columns>
									<xul:column flex="1"/>
									<xul:column flex="1"/>
									<xul:column flex="1"/>
									<xul:column flex="1"/>
									<xul:column flex="1"/>
									<xul:column flex="1"/>									
								</xul:columns>
								<xul:rows>
								<!-- 
									<xul:row>
										<xul:vbox class="oe-date-picker-month-day-box-class">
											<xul:label  value="Min" />
										</xul:vbox>
									</xul:row>
								-->
									<xul:row id="ximfmail-date-picker-min-line1-header-box">
										<xul:vbox class="oe-date-picker-month-day-box-class" anonid="ximfmail-date-picker-min-box-0" onclick="clickMin(this,0)">
											<xul:label  class="oe-date-picker-month-day-number-class" anonid="ximfmail-date-picker-min-text-0" value=":00" />
										</xul:vbox> 
										<xul:vbox class="oe-date-picker-month-day-box-class" anonid="ximfmail-date-picker-min-box-5" onclick="clickMin(this,5)">
											<xul:label  class="oe-date-picker-month-day-number-class" anonid="ximfmail-date-picker-min-text-5" value=":05" />
										</xul:vbox>
										<xul:vbox class="oe-date-picker-month-day-box-class" anonid="ximfmail-date-picker-min-box-10" onclick="clickMin(this,10)">
											<xul:label  class="oe-date-picker-month-day-number-class"  anonid="ximfmail-date-picker-min-text-10" value=":10" />
										</xul:vbox>
										<xul:vbox class="oe-date-picker-month-day-box-class" anonid="ximfmail-date-picker-min-box-15" onclick="clickMin(this,15)">
											<xul:label  class="oe-date-picker-month-day-number-class"  anonid="ximfmail-date-picker-min-text-15" value=":15" />
										</xul:vbox>
										<xul:vbox class="oe-date-picker-month-day-box-class" anonid="ximfmail-date-picker-min-box-20" onclick="clickMin(this,20)">
											<xul:label  class="oe-date-picker-month-day-number-class"  anonid="ximfmail-date-picker-min-text-20" value=":20" />
										</xul:vbox>
										<xul:vbox class="oe-date-picker-month-day-box-class" anonid="ximfmail-date-picker-min-box-25" onclick="clickMin(this,25)">
											<xul:label  class="oe-date-picker-month-day-number-class"  anonid="ximfmail-date-picker-min-text-25" value=":25" />
										</xul:vbox>																			
									</xul:row>
									<xul:row id="ximfmail-date-picker-min-line2-header-box">
										<xul:vbox class="oe-date-picker-month-day-box-class" anonid="ximfmail-date-picker-min-box-30" onclick="clickMin(this,30)">
											<xul:label  class="oe-date-picker-month-day-number-class"  anonid="ximfmail-date-picker-min-text-30" value=":30" />
										</xul:vbox>
										<xul:vbox class="oe-date-picker-month-day-box-class" anonid="ximfmail-date-picker-min-box-35" onclick="clickMin(this,35)">
											<xul:label  class="oe-date-picker-month-day-number-class"  anonid="ximfmail-date-picker-min-text-35" value=":35" />
										</xul:vbox>  
										<xul:vbox class="oe-date-picker-month-day-box-class" anonid="ximfmail-date-picker-min-box-40" onclick="clickMin(this,40)">
											<xul:label  class="oe-date-picker-month-day-number-class" anonid="ximfmail-date-picker-min-text-40" value=":40" />
										</xul:vbox>
										<xul:vbox class="oe-date-picker-month-day-box-class" anonid="ximfmail-date-picker-min-box-45" onclick="clickMin(this,45)">
											<xul:label  class="oe-date-picker-month-day-number-class" anonid="ximfmail-date-picker-min-text-45" value=":45" />
										</xul:vbox>
										<xul:vbox class="oe-date-picker-month-day-box-class" anonid="ximfmail-date-picker-min-box-50" onclick="clickMin(this,50)">
											<xul:label  class="oe-date-picker-month-day-number-class" anonid="ximfmail-date-picker-min-text-50" value=":50" />
										</xul:vbox>
										<xul:vbox class="oe-date-picker-month-day-box-class" anonid="ximfmail-date-picker-min-box-55" onclick="clickMin(this,55)">
											<xul:label  class="oe-date-picker-month-day-number-class" anonid="ximfmail-date-picker-min-text-55" value=":55" />
										</xul:vbox>																				
									</xul:row>
								</xul:rows>
							</xul:grid>										
							<xul:hbox id="ximf-date-picker-end-controls-box">
								<xul:box>		
									<xul:image id="oe-date-picker-currenttime-text" onclick="setToday()" /></xul:box>					
									<xul:box flex="1" />
								<xul:box>	<xul:image id="ximf-date-picker-ok-control-box" onclick="clickOk()"/>
								</xul:box>
							</xul:hbox>
					</xul:vbox>				
				</xul:popup>
			</xul:hbox>
		</content>

		<implementation>
			<constructor>
				<![CDATA[
				// The popup window containing the picker
				this.gPopup = null
				
				// The original starting date and currently selected date
				this.gOriginalDate = null; 
				this.gSelectedDate = null; 
				
				// selected items
				this.gSelectedMonthItem = null;
				this.gSelectedDayItem = null;			
				
				this._input = document.getAnonymousElementByAttribute( this, "anonid", "input");
							
				var defaultDate = this.date;
				if( defaultDate )
					this.date = defaultDate;
					
				//EADS DS
				this.gSelectedHoursItem = null;
				this.gSelectedMinutesItem = null;
				]]>
			</constructor>			
			<property name="date">
				<getter>
					if( this.hasAttribute( "date" ) ){
						var val = this.getAttribute( "date" );
						if( val == "now" )
							return new Date();
						else
							return new Date( val );
					}
					else
						return null;
				</getter>
				<setter>
					if( val == "now" ){
						this.setDate( new Date() );
						this.setAttribute( "date", "now" );
					}
					else{
						this.setDate( val );
						this.setAttribute( "date", val.getTime() );
					}
				</setter>
			</property>
			<property name="disabled">
				<getter>
					return this._input.disabled;
				</getter>
				<setter>
					this.setAttribute( "disabled", val );
					this._input.disabled = val;
				</setter>
			</property>

			<!-- see keypress example from mozilla/toolkit/content/widgets/autocomplete.xml -->
			<method name="onKeyPress">
				<parameter name="aEvent"/>
				<body><![CDATA[
					//XXX: this is so bogus...
					if (aEvent.getPreventDefault())
						return false;

					if (aEvent.keyCode || aEvent.charCode <= 32 || aEvent.altKey || 
							aEvent.ctrlKey || aEvent.metaKey)
						return true;  // No printable char pressed, not a potential accesskey

					var key = aEvent.which;
					var keychar = String.fromCharCode( aEvent.which );//String.fromCharCode(key);

					// control keys
					if ((key==null) || (key==0) || (key==8) || 
							(key==9) || (key==13) || (key==27) ){
						return true;
					}

					// numbers and a single decimal
					if ((("-/0123456789").indexOf(keychar) > -1)){
						return true;
					}
					
					// blocking event
					aEvent.stopPropagation();
					aEvent.preventDefault();
					return false;
					]]>
				</body>
			</method>
			<method name="popupshowing">
				<parameter name="popup"/>
				<body><![CDATA[
					// Set up the picker, called when the popup pops
					this.gPopup = popup;

					// get the start date from the popup value attribute and select it					
					var startDate = this.gPopup.value;					
					
					if(startDate){						
						this.gOriginalDate = new Date( startDate );
						this.gSelectedDate = new Date( startDate );
					}else{
						this.gOriginalDate = new Date();
						this.gSelectedDate = new Date();
						this.gSelectedDate.setMinutes(Math.round((this.gSelectedDate.getMinutes()/5))*5);  
						this.gOriginalDate.setMinutes(Math.round((this.gOriginalDate.getMinutes()/5))*5);  
					}
					
					// draw the year based on the selected date
					this.redrawYear();

					// draw the month based on the selected date
					var month = this.gSelectedDate.getMonth() + 1;
					var selectedMonthBoxItem = document.getAnonymousElementByAttribute( this, "anonid", "oe-date-picker-year-month-" + month + "-box"  );
					this.selectMonthItem( selectedMonthBoxItem );

					// draw in the days for the selected date
					this.redrawDays();
					
					//EADS - draw in hours and minutes for selected date
					var hour = this.gSelectedDate.getHours();
					var selectedHoursBoxItem = document.getAnonymousElementByAttribute( this, "anonid", "ximfmail-date-picker-hour-box-" + hour );
					this.selectHoursItem(selectedHoursBoxItem);
					
					var min = this.gSelectedDate.getMinutes();
					var selectedMinutesBoxItem = null;
					if(min%5 != 0)
						selectedMinutesBoxItem = document.getAnonymousElementByAttribute( this, "anonid", "ximfmail-date-picker-min-box-" + (Math.round(min/5)*5) );
					else
						selectedMinutesBoxItem = document.getAnonymousElementByAttribute( this, "anonid", "ximfmail-date-picker-min-box-" + min );
					this.selectMinutesItem(selectedMinutesBoxItem); 
				]]></body>
			</method>
					
			<method name="clickDay">
				<parameter name="newDayItem"/>
				<parameter name="newDayItemNumber"/>
				<body><![CDATA[
					// Called when a day is clicked, close the picker and call the client's oncommand
					// get the clicked day
					 
					var dayNumberItem = document.getAnonymousElementByAttribute( this, "anonid", "oe-date-picker-month-day-text-" + newDayItemNumber );

					var dayNumber = dayNumberItem.getAttribute( "value" );

					// they may have clicked an unfilled day, if so ignore it and leave the picker up

					if( dayNumber != "" ){						
						this.selectDayItem(newDayItem);
						// set the selected date to what they cliked on
						this.gSelectedDate.setDate( dayNumber );						
						this.selectDate();

					}
				]]></body>
			</method>
			<method name="selectDate">
				<body><![CDATA[
					// We copy the picked date to avoid problems with changing the Date object in place
						
					var pickedDate = new Date( this.gSelectedDate );

					// put the selected date in the popup item's value property

					this.gPopup.value = pickedDate;

					// get the client oncommand function, call it if there is one

					var commandEventMethod = this.gPopup.getAttribute( "oncommand" );

					if( commandEventMethod != null )
					{
						// set up a variable date, that will be avaialable from within the 
						// client method

						var date = pickedDate;

						// Make the function a member of the popup before calling it so that 
						// 'this' will be the popup

						this.gPopup._input = this._input; // save the input
						var input = this._input;

						this.gPopup.oeDatePickerFunction = function(){
							var datePopup = this;
							var newDate =  datePopup.value;
							var day = newDate.getDate();
							if(day < 10){day = "0" + day;}
							var month = newDate.getMonth() + 1;
							if(month < 10){month = "0" + month;}
							var hour = newDate.getHours();
							if(hour < 10){hour = "0"+ hour;}
							var min = newDate.getMinutes();
							if(min < 10){min = "0" + min;}

							this._input.value = day + "/" +  month + "/" +  newDate.getFullYear() + " " + hour + ":" + min;
							
						};
						
						this.gPopup.oeDatePickerFunction();
					}

					// close the popup
					//this.gPopup.closePopup();
				]]></body>
			</method>
			<method name="clickMonth">
				<parameter name="newMonthItem"/>
				<parameter name="newMonthNumber"/>
				<body><![CDATA[
					// Called when a month box is clicked 
					// already selected, return
					if( this.gSelectedMonthItem  == newMonthItem )
						return;

					// Avoid problems when changing months if the date is at the end of the month
					// i.e. if date is 31 march and you do a setmonth to april, the month would
					// actually be set to may, beacause april only has 30 days.
					// This is why we keep the original date around.

					var oldDate = this.gSelectedDate.getDate();
					var yearNumber = this.gSelectedDate.getFullYear();

					var pastLastDate = new Date( yearNumber, newMonthNumber-1, 32 );
   					var lastDayOfMonth = 32 - pastLastDate.getDate(); 

					if( oldDate > lastDayOfMonth ){
						 this.gSelectedDate.setDate(lastDayOfMonth);
					}

					// update the selected date
					this.gSelectedDate.setMonth( newMonthNumber - 1 );

					// select Month
					this.selectMonthItem( newMonthItem );

					// redraw days
					this.redrawDays();
					this.selectDate();
				]]></body>
			</method>
			<method name="previousYearCommand">
				<parameter name="increment"/>
				<body><![CDATA[
					// Called when previous Year button is clicked 
					// update the selected date

					var oldYear = this.gSelectedDate.getFullYear(); 
					this.gSelectedDate.setFullYear( oldYear - increment ); 

					// redraw the year and the days
					this.redrawYear();
					this.redrawDays();
					this.selectDate();
				]]></body>
			</method>
			<method name="setToday">
				<body><![CDATA[
					this.gSelectedDate = new Date();

					// redraw the year and the days
					this.redrawYear();
					this.redrawDays();
					
					//select new month item
					var newMonth = this.gSelectedDate.getMonth();				 
					var monthItem = document.getAnonymousElementByAttribute( this, "anonid", "oe-date-picker-year-month-" + (newMonth+1) + "-box");
					this.selectMonthItem(monthItem);					
					
					// select new hours  item										 
					var newHour = this.gSelectedDate.getHours();						 
					var hourNumberItem = document.getAnonymousElementByAttribute( this, "anonid", "ximfmail-date-picker-hour-box-" + newHour );
					this.selectHoursItem(hourNumberItem);
					
					// select new minutes item
					this.gSelectedDate.setMinutes(Math.round((this.gSelectedDate.getMinutes()/5))*5);  
					var newMinutes = this.gSelectedDate.getMinutes();						 
					var minutesNumberItem = document.getAnonymousElementByAttribute( this, "anonid", "ximfmail-date-picker-min-box-" + newMinutes );
					this.selectMinutesItem(minutesNumberItem);			
									
					this.selectDate();
				]]></body>
			</method>
			<method name="nextYearCommand">
				<parameter name="increment"/>
				<body><![CDATA[
					// Called when next Year button is clicked 
					// update the selected date

					var oldYear = this.gSelectedDate.getFullYear(); 
					this.gSelectedDate.setFullYear( oldYear + increment ); 

					// redraw the year and the days
					this.redrawYear();
					this.redrawDays();
					this.selectDate();
				]]></body>
			</method>
			<method name="redrawYear">
				<body><![CDATA[
					var yearTitleItem = document.getAnonymousElementByAttribute( this, "anonid", "oe-date-picker-year-title-text" );
					yearTitleItem.setAttribute( "value", this.gSelectedDate.getFullYear() );
				]]></body>
			</method>

			<method name="selectMonthItem">
				<parameter name="newMonthItem"/>
				<body><![CDATA[
					// Select a month box 
					// clear old selection, if there is one
					if( this.gSelectedMonthItem != null ){
						this.gSelectedMonthItem.setAttribute( "selected" , false );
					}

					// Set the selected attribute, used to give it a different style
					newMonthItem.setAttribute( "selected" , true );

					// Remember new selection
					this.gSelectedMonthItem = newMonthItem;
				]]></body>
			</method>
			<method name="selectDayItem">
				<parameter name="newDayItem"/>
				<body><![CDATA[
					// Select a day box 
					// clear old selection, if there is one

					if( this.gSelectedDayItem != null ){
						this.gSelectedDayItem.setAttribute( "selected" , false );
					}

					if( newDayItem != null ){
						// Set the selected attribute, used to give it a different style
						newDayItem.setAttribute( "selected" , true );
					}
					// Remember new selection
					this.gSelectedDayItem = newDayItem;
				]]></body>
			</method>
			<method name="redrawDays">
				<body><![CDATA[
					// Redraw day numbers based on the selected date
					// Write in all the day numbers
					 
					var firstDate = new Date( this.gSelectedDate.getFullYear(), this.gSelectedDate.getMonth(), 1 );
					var firstDayOfWeek = firstDate.getDay();
					 
					//get last Day Of Month					 
					 var pastLastDate = new Date( this.gSelectedDate.getFullYear(), this.gSelectedDate.getMonth(), 32 );
   					 var lastDayOfMonth = 32 - pastLastDate.getDate(); 
					 
					// clear the selected day item					 
					this.selectDayItem( null );
					 
					// redraw each day bax in the 7 x 6 grid
					 
					var dayNumber = 1;
					 
					for( var dayIndex = 0; dayIndex < 42; ++dayIndex )
					{
						// get the day text box
							
						var dayNumberItem = document.getAnonymousElementByAttribute( this, "anonid", "oe-date-picker-month-day-text-" + (dayIndex + 1) );
							
						// if it is an unfilled day ( before first or after last ), just set its value to "",
						// and don't increment the day number.
							
						if( dayIndex < firstDayOfWeek || dayNumber > lastDayOfMonth )
						{
							 dayNumberItem.setAttribute( "value" , "" );  
						}
						else
						{
							 // set the value to the day number
							 
							 dayNumberItem.setAttribute( "value" , dayNumber );
								 
							 // draw the day as selected
							 if( dayNumber == this.gSelectedDate.getDate() ) 
							 {
									var dayNumberBoxItem = document.getAnonymousElementByAttribute( this, "anonid", "oe-date-picker-month-day-" + (dayIndex + 1) + "-box"  );
									this.selectDayItem( dayNumberBoxItem );
							 }
					 
							 // advance the day number
								 
							 ++dayNumber;  
						}
					}
				]]></body>
			</method>

			<method name="openPopup">
				<parameter name="button"/>
				<body><![CDATA[
					var datestr = this._input.value;
					var datePickerPopup = document.getAnonymousElementByAttribute( this, "anonid", "oe-date-picker-popup" );
					var date = this.parseDate( datestr );
					if( !date )
						date = new Date();

					datePickerPopup.setAttribute( "value", date );
					// XXX: is there a better way to offset the popup then hard coding 25?
					//datePickerPopup.showPopup( button, button.boxObject.screenX,(button.boxObject.screenY + 25), "popup" );
					datePickerPopup.showPopup( button, -1, -1, "popup" );
				]]></body>
			</method>
			<method name="parseDate">
				<parameter name="datestr"/>
				<body><![CDATA[
					//var datestr = this._input.value;					
					try{
						if( datestr != "" ){
							var reg=new RegExp("[ / :]+", "g"); //eads
							var parts = datestr.split(reg);							
							if( parts.length >= 5 ){								
								//var d = new Date(month, day, year, hour, minutes, seconds);
								//return new Date(parseInt(parts[1]-1),parseInt(parts[0]),parseInt(parts[2]),parseInt(parts[3]),parseInt(parts[4]),0);
								alert("SPLIT DATE\nmonth : "+parts[1] + "\n day : " + parts[0] +"\n year : "+ parts[2] +"\n hour : "+ parts[3] +"\n min : "+ parts[4]);
								var new_date = new Date();
								new_date.setDate(parseInt(parts[0], 10));
								new_date.setMonth(parseInt(parts[1]-1, 10));
								new_date.setFullYear(parseInt(parts[2], 10));
								new_date.setHours(parseInt(parts[3], 10));
								new_date.setMinutes(parseInt(parts[4], 10));
								new_date.setSeconds(0);
								return new_date;								
							}
						}
					}catch(e){}
					return null;
				]]></body>
			</method>

			<method name="getDate">
				<body><![CDATA[
					return this.parseDate( this._input.value );
				]]></body>
			</method>
			<method name="setDate">
				<parameter name="date"/>
				<body><![CDATA[
					if( !date )
						return;

					try{
						this.gSelectedDate = date;
						this._input.value = date.getDate() + "/" + (date.getMonth()+1) + "/" +  date.getFullYear() + " " + date.getHours() + ":" + date.getMinutes();
					}catch( e ){
						// try parsing the date as a string					
						this.gSelectedDate = this.parseDate( date );
						if( this.gSelectedDate )
							this._input.value = date;
						else{
							dump( "Date is invalid: " + date + "\n" );
							alert( "Date is invalid: " + date + "\n" );
							return;
						}
					}
					if( this.gPopup ){
						// redraw the year and the days
						this.redrawYear();
						this.redrawDays();
						this.selectDate();
					}
				]]></body>
			</method>
			<property name="value">
				<getter>
					return this.getDate();
				</getter>
				<setter>
					this.setDate(val);
				</setter>
			</property>
			<!-- EADS BEGIN -->
			<method name="clickHour">
				<parameter name="newHoursItem"/>
				<parameter name="newHourItemNumber"/>
				<body><![CDATA[					
					var hourNumberItem = document.getAnonymousElementByAttribute( this, "anonid", "ximfmail-date-picker-hour-text-" + newHourItemNumber );
					var hourNumber = hourNumberItem.getAttribute( "value" );					
					// they may have clicked an unfilled day, if so ignore it and leave the picker up
					if( hourNumber != "" ){						
						
						this.selectHoursItem(newHoursItem);
						
						//bug on 8 and 9 ParseInt hourNumber
						//alert(hourNumber +" .. " + parseInt(hourNumber)+">>"+this.gSelectedDate.getHours());
						
						//var iHour = 0; parseInt(hourNumber);
						//if(hourNumber=="08"){
						//	iHour = 8;
						//}else{
						//	if(hourNumber=="09"){
						//		iHour = 9;
						//	}else{
						//		iHour = parseInt(hourNumber);
						//	}
						//}
						
						//this.gSelectedDate.setHours(iHour);
						this.gSelectedDate.setHours(parseInt(hourNumber, 10));						
						this.selectDate();
									
					}
				]]></body>
			</method>
			<method name="selectHoursItem">
				<parameter name="newHoursItem"/>
				<body><![CDATA[
					// Select a month box 
					// clear old selection, if there is one
					if( this.gSelectedHoursItem != null ){
						this.gSelectedHoursItem.setAttribute( "selected" , false );
					}

					// Set the selected attribute, used to give it a different style
					newHoursItem.setAttribute( "selected" , true );

					// Remember new selection
					this.gSelectedHoursItem = newHoursItem;
				]]></body>
			</method>
			<method name="clickMin">
				<parameter name="newMinItem"/>
				<parameter name="newMinItemNumber"/>
				<body><![CDATA[					
					var minItem = document.getAnonymousElementByAttribute( this, "anonid", "ximfmail-date-picker-min-text-" + newMinItemNumber );
					var minNumber = minItem.getAttribute( "value" );
					
					// they may have clicked an unfilled day, if so ignore it and leave the picker up
					if( minNumber != "" ){
						//
						this.selectMinutesItem(newMinItem);
						//
						
						this.gSelectedDate.setMinutes(parseInt(newMinItemNumber, 10));	
						this.selectDate();				
					}
				]]></body>
			</method>

			<method name="selectMinutesItem">
				<parameter name="newMinutesItem"/>
				<body><![CDATA[
					// Select a month box 
					// clear old selection, if there is one
					if( this.gSelectedMinutesItem != null ){
						this.gSelectedMinutesItem.setAttribute( "selected" , false );
					}

					// Set the selected attribute, used to give it a different style
					newMinutesItem.setAttribute( "selected" , true );

					// Remember new selection
					this.gSelectedMinutesItem = newMinutesItem;
				]]></body>
			</method>			
			<method name="clickOk">
				<body><![CDATA[
					this.selectDate();
					this.gPopup.hidePopup();
				]]></body>
			</method>
			
			<method name="clickHourRange">				
				<parameter name="newValueNumber"/>
				<body><![CDATA[
					var rowItem = document.getAnonymousElementByAttribute( this, "anonid", "ximfmail-date-picker-hour-24-header-box" );
					if(newValueNumber == "12"){						
						//rowItem.setAttribute("hidden","true");
						rowItem.style.display="none";
					}else{
						//rowItem.setAttribute("hidden","false");
						rowItem.style.display="";
					}
				]]></body>
			</method>
			<!-- EADS END -->
		</implementation>		
		<handlers>		
			<handler event="keypress" phase="capturing" action="return this.onKeyPress(event);"/>
		</handlers>
	</binding>
</bindings>
