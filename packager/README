== Build Documentation ==
=== Dependencies ===
==== Linux (Debian) ====
* build-essential
* ant
* git-core
* libgtk2.0-dev
* libglib1.2-dev
* libidl-dev
* libxt-dev
* zip
* unzip
* flex
* bison
* fakeroot
* dpkg-deb
* python-dev
* autoconf
* libtool 
* a Java JDK for ant (java-gcj-compat-dev, sun-java6-jdk, openjdk-6-jdk,...)

==== Windows ====
* Microsoft Visual C++ 6 with Service Pack 5 (not Service Pack 6 because Processor Pack needs SP5)
* Visual C++ 6.0 Processor Pack
* Latest MozillaBuild
* Git
* Java JDK
* Ant

See http://developer.mozilla.org/en/docs/Windows_Build_Prerequisites

* Add Ant path, Cygwin path and JDK path to the PATH variable in c:\mozilla-build\start-msvc6.bat:
    SET PATH=%PATH%;%MOZ_TOOLS%\bin;C:\mozilla-build\apache-ant-1.8.0RC1-bin\bin;C:\cygwin\bin;C:\Program Files\Java\jdk1.6.0_18\bin
* Set JAVA_HOME as environment variable
* Launch build environment with c:\mozilla-build\start-msvc6.bat

=== Get repository ===
 $ git clone https://adullact.net/anonscm/git/milimail/milimail.git trustedbird

=== Building ===
 $ cd trustedbird/packager

  // Download Thunderbird
 $ wget ftp://ftp.mozilla.org/pub/thunderbird/releases/2.0.0.24/source/thunderbird-2.0.0.24-source.tar.bz2

  // Build and package Trustedbird and add-ons
 $ ant build-all

  // OR: build and package trustedbird
 $ ant trustedbird

  // OR: build and package add-ons
 $ ant package-addons

* All built packages are available in trustedbird/dist/

=== Signed updates (optional) ===
Generate a public key from McCoy and put it in a new "updateKey" file in same folder as build.xml.
It will be automatically inserted in install.rdf file of all add-ons.

In order to use trustedbird.org key, copy "updateKey-trustedbird.org" file to "updateKey" and then build add-ons.

Next, using McCoy, sign all dist/updates/*/update.rdf before publishing them.
